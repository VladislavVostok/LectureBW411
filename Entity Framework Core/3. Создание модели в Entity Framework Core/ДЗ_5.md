# Настройка модели данных через Fluent API

**Тема:** Продвинутая настройка модели "Фитнес-трекер" с использованием Fluent API.

---

## **Цель задания**
Научиться использовать Fluent API для точной настройки отображения классов на базу данных. Это ключевой навык для работы с существующими БД и специфическими требованиями, которые невозможно реализовать через атрибуты (Data Annotations).

---

## **Задание**

Вернитесь к проекту "Фитнес-трекер". Вам необходимо отказаться от использования Атрибутов (Data Annotations) в пользу Fluent API для конфигурации модели.

### **Требования:**

#### **1. Разделение конфигурации**
Не пишите всю конфигурацию в методе `OnModelCreating`. Поизучайте документацию, как делать конфигурацию в отдельных классах и применять их самостоятельно.
*   Создайте отдельные классы конфигурации для каждой сущности, реализовав интерфейс `IEntityTypeConfiguration<T>`.
    *   `ClientConfiguration`
    *   `TrainerConfiguration`
    *   `ExerciseConfiguration`
    *   `WorkoutSessionConfiguration`
*   Примените эти конфигурации в `DbContext` одной строкой через `ApplyConfigurationsFromAssembly`.

#### **2. Настройка сущностей (Fluent API)**

Релизуйте следующие требования **исключительно** через Fluent API:

**Для сущности `Client`:**
*   **Имя таблицы:** `FitnessClients` (в схеме `public`).
*   **Ключ:** Первичный ключ `Id`.
*   **Свойства:**
    *   `FullName`: Обязательное поле, макс. длина 100 символов.
    *   `BirthDate`: Обязательное поле, тип данных в БД `date` (без времени).
    *   `Age` (если есть): **Исключите** это свойство из сопоставления с БД (используйте `Ignore`), так как возраст можно вычислить.

**Для сущности `Trainer`:**
*   **Имя таблицы:** `FitnessTrainers`.
*   **Индексы:** Создайте индекс для поля `Specialization`, чтобы ускорить поиск тренеров по специализации.
*   **Свойства:**
    *   `ExperienceYears`: Настройте проверочное ограничение (Check Constraint), чтобы стаж не мог быть меньше 0 (используйте `HasCheckConstraint`). *Примечание: Убедитесь, что ваша БД поддерживает это (PostgreSQL поддерживает).*

**Для сущности `Exercise`:**
*   **Имя таблицы:** `ExercisesCatalog`.
*   **Составной ключ (Опционально):** Если у вас нет поля `Id`, попробуйте сделать составной ключ из `Name` и `DifficultyLevel` (или просто настройте `Id` как ключ).
*   **Значения по умолчанию:** Для поля `DifficultyLevel` настройте значение по умолчанию "Beginner".

**Для сущности `WorkoutSession`:**
*   **Названия столбцов:** Переименуйте столбец `Date` в `SessionDate` в базе данных (не меняя имя свойства в классе).

---

## **Пример класса конфигурации:**

```csharp
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Metadata.Builders;

public class ClientConfiguration : IEntityTypeConfiguration<Client>
{
    public void Configure(EntityTypeBuilder<Client> builder)
    {
        // Имя таблицы
        builder.ToTable("FitnessClients");

        // Первичный ключ
        builder.HasKey(c => c.Id);

        // Настройка свойств
        builder.Property(c => c.FullName)
            .IsRequired()
            .HasMaxLength(100)
            .HasColumnName("ClientName"); // Пример переименования столбца

        // Исключение свойства
        builder.Ignore(c => c.Age);
        
        // Индекс (пример для Email, если есть)
        // builder.HasIndex(c => c.Email).IsUnique(); 
    }
}
```
