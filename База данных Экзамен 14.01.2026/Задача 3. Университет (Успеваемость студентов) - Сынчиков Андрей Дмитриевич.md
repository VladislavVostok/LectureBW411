**Тема:** Академический учет и агрегация данных.

**1. Сущности и связи (Таблицы):**

- **Students** (Студенты): `StudentID` (PK), `FirstName`, `LastName`, `EnrollmentYear`.
- **Courses** (Курсы): `CourseID` (PK), `CourseName`, `Credits`.
- **Grades** (Оценки): `GradeID` (PK), `StudentID` (FK), `CourseID` (FK), `Score` (числовая оценка).

**2. Триггер:**

- Создать триггер **AFTER INSERT, UPDATE** на таблицу `Grades`. Если студент получает оценку ниже 60 (проходной балл), триггер должен автоматически записывать в специальное поле (или выводить сообщение, если поля нет) информацию о необходимости пересдачи. _Вариант для SQL Server:_ Триггер должен предотвращать проставление оценки > 100 или < 0.

**3. Пользовательская функция:**

- Создать функцию `fn_CalculateGPA(@StudentID)`, которая вычисляет средний балл (GPA) студента на основе всех его оценок из таблицы `Grades`.

**4. Хранимые процедуры:**

- `sp_ExpelStudent`: Процедура для отчисления студента. Принимает `StudentID`. Должна удалять студента из таблицы `Students` (или помечать как удаленного) и удалять все его записи об оценках.

**5. Транзакция:**

- В процедуре `sp_ExpelStudent` реализовать транзакцию. Удаление студента и удаление его оценок должны быть атомарны. Если при удалении оценок произойдет ошибка, удаление самого студента должно быть отменено.


### Замечания по решения:

   * Таблицы: Таблицы Students, Courses, Grades созданы в соответствии с заданием, ключи определены правильно.
   * Триггер: Триггер GradeCheck корректно срабатывает при добавлении или обновлении оценки. Он использует ROLLBACK
     для отмены операции, если оценка выходит за допустимые пределы (0-100), что является правильным подходом.
   * Функция: Функция fn_CalculateGPA верно вычисляет средний балл (GPA) для указанного студента.
   * Хранимая процедура: Процедура sp_ExpelStudent реализована образцово. Она использует транзакцию с блоком
     TRY...CATCH для безопасного удаления сначала оценок студента, а затем и самого студента, что гарантирует
     целостность данных.


  **Вывод**: Отлично справился со всеми пунктами задания, продемонстрировав понимание принципов валидации данных и атомарности операций.

  **Оценка**: 12/12