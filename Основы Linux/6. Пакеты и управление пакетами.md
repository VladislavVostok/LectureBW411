
### Способы установки программного обеспечения в Linux  

Установка программного обеспечения в Linux осуществляется двумя основными  
способами: 
- **c помощью пакетов;**  
- **из исходных кодов**.

***Пакет*** представляет собой набор файлов, содержащий все необходимое для установки программы. Существуют два основных типа пакетов:  

- RPM-пакеты применяются во всех Red Нat-совместимых дистрибутивах: **Red Hat**, **Fedora**, **CentOS**, **ALT Linux** и др.;  
- DEВ-пакеты применяются в дистрибутиве **Debian** и в дистрибутивах, на нем основанных: **Ubuntu**, **Kubuntu** **Edubuntu**, **Denix** и др.

Название RPM-пакетов связано с предложенной компанией **Red Hat** технологией, основанной на использовании менеджера пакетов **rmp** (Red Hat Package Manager) c DEВ-пакетами все проще они так названы потому что последние три символа имени y файлов пакетов deb (сокращение от Debian).

Не найдя в своем дистрибутиве нужной вам программы попробуйте поискать ее пакет на следующих сайтах:

- RPM-пакеты: https://rpmfind.net и https://rpm.pbone.net  
- DEВ-пакеты: https://www.debian.org/distrib/pachages и https://packages.ubuntu.com/  

Если вы не можете найти в Интернете комплектный пакет программы, тогда придется компилировать программу самому при условии, что вы нашли архив с ее исходным кодом. Да, в Linux некоторые программы распространяются только в исходных кодах. Для установки такой программы нужно распаковать архив с ее исходными кодами (желательно в каталог /usr/src), затем перейти в каталог, содер­жащий файлы распакованного архива исходных кодов, и поочередно выполнить следующие команды:

```sh
./configure
make
make install
```

Сценарий **configure** проверит, содержит ли ваша система необходимые библиотеки или программы, и, если все нормально, создаст файл **Makefile**. Если вы увидели со­общение об ошибке, внимательно прочитайте его и попытайтесь устранить причи­ну ошибки - например, установите недостающую библиотеку. Ясно, что в случае возникновения ошибки вводить последние две команды не нужно. 

Вторая команда (**make**) на основании созданного файла **Makefile** компилирует про­грамму. А последняя команда (**make  install**) устанавливает программу и дополни­тельные файлы в дерево файловой системы: программы - обычно в каталог **/usr/bin**, документацию - в **/usr/share/doc**, конфигурационные файлы - в **/etc** и т. д.

#### Небольшой пример установки Python3 из исходников.

1) Качаем исходники с сайта https://www.python.org/downloads/release/python-3133/

Чтобы скачать файл с помощью `wget` или `curl` в Linux/macOS (или Windows с установленными этими утилитами), выполните следующие команды:

**Скачивание с помощью `wget`**
```bash
wget URL_файла
```
**Пример:**
```bash
wget https://example.com/file.zip
```

**Дополнительные опции:**
- Скачать с другим именем:
  ```bash
  wget -O новое_имя_файла URL_файла
  ```
- Продолжить прерванную загрузку:
  ```bash
  wget -c URL_файла
  ```
- Скачать в фоновом режиме:
  ```bash
  wget -b URL_файла
  ```
 2. **Скачивание с помощью `curl`**
```bash
curl -o имя_файла URL_файла
```
**Пример:**
```bash
curl -o file.zip https://example.com/file.zip
```

**Дополнительные опции:**
- Скачать и сразу вывести содержимое в терминал (если это текст):
  ```bash
  curl URL_файла
  ```
- Продолжить прерванную загрузку:
  ```bash
  curl -C - -o имя_файла URL_файла
  ```
- Скачать с указанием User-Agent (например, для обхода ограничений):
  ```bash
  curl -A "Mozilla/5.0" -o имя_файла URL_файла
  ```

**Разница между `wget` и `curl`:**
- **`wget`** — лучше подходит для скачивания файлов, поддерживает рекурсивное скачивание и продолжение загрузки.
- **`curl`** — более универсален, поддерживает множество протоколов (HTTP, FTP, SCP и др.), удобен для работы с API.

Если вам нужно просто скачать файл, обычно проще использовать `wget`. Если требуется больше контроля (например, отправка заголовков), лучше подойдёт `curl`.


2) Устанавливаем зависимости для компиляции:

```sh
sudo apt update -y
```

```sh
sudo apt install -y build-essential zlib1g-dev libffi-dev libsqlite3-dev libncurses5-dev
```

```sh
sudo apt install -y libncursesw5-dev libreadline6-dev libdb5.3-dev
```

```sh
sudo apt install -y libgdbm-dev libssl-dev libbz2-dev libexpat1-dev liblzma-dev tk-dev
```

3) Распаковка скачанных файлов:

Если формат архива tgz:
```sh
tar zxvf archive.tgz
```
Если формат архива tar.xz:

```sh
tar xvJf archive.tar.xz
```

И переходим внутрь директории распакованного архива:

```sh
cd archive
```

4) Теперь нужно сконфигурировать установку командой `./configure`. Определимся, куда мы будем ставить нужный нам Python и укажем эту директорию в конфигурации. Обычно не системные приложения в Linux ставятся в папку `/opt`, следовательно, будем ставить в директорию `/opt/Python-3.x.x/`, где `.x.x` - обозначают версию Python.

```sh
# компилируется быстро
./configure --prefix=/opt/python-3.x.x/

# компилируется медленно, но потом работает быстрее
./configure --prefix=/opt/python-3.x.x/ --enable-optimizations
```

5) Далее скомпилируем Python и установим в директорию, указанную в конфигурации:
```sh
# компиляция, займет продолжительное время
make -j4
# установка
sudo make altinstall
```

Команда `make -j4` создаст CPython с выводом только предупреждений и ошибок в `stderr` и будет использовать до 4-x ядер ЦП. Если вы используете машину с более чем четырьмя ядрами или одноядерную машину, то измените число, переданное в флаг **-j**, в соответствии с количеством ядер, которые у вас есть.

6) И теперь чтобы python был доступен из терминала:
```sh
echo 'alias py3.x.x=”/opt/python-3.x.x/bin/python″' >> ~/.bashrc 
echo 'alias pip3.x.x=”/opt/python-3.x.x/bin/pip″' >> ~/.bashrc 
```

7) Проверка установки:
```sh
py3.x.x --version
pip3.x.x --version
```

**ЧИТАЙТЕ ФАЙЛ README!** 
Для получения подробных инструкций по установке и удалению таких программ лучше всего предварительно прочитать файл README, который обычно присутствует в архиве.


Пакет установки программы, как правило состоит из набора файлов например, исполнимого и конфигурационного, a также файла справки. В зависимости от организации программы установки все эти файлы могут быть:

- заархивированы каждый отдельно в этом случае мы получаем набор из архивов файлов программы плюс программа установки;  
- заархивированы в один общий архив, содержащий комплект файлов программы и программу установки;  
- укомплектованы в саму программу установки самый удобный случай, когда y нас всего один файл программа установки  

Кроме файлов собственно программы в пакете хранится также и служебная информация, описывающая процесс установки программы:

- **пути** - ведь один файл нужно скопировать например, в каталог **/usr/bin** а другой в **/usr/share/doc**;  
- **дополнительные действия** например, создание каталога, установка тех или иных прав доступа к файлам и каталогам программы;
- **зависимости** - программе для работы может требоваться какая-либо библиотека, без которой она не может запускаться, поскольку использует ее функции. Тогда в пакете указывается, что он зависит от другого пакета, содержащего эту библиотеку. При установке менеджер пакетов проверяет зависимости: если установлены не все пакеты, от которых зависит устанавливаемый пакет, установка будет прервана - пока вы не установите все необходимое. Впрочем, имеется возможность установки программы и без удовлетворения зависимостей (тогда информация о зависимостях будет просто проигнорирована), но в большинстве случаев установленная таким образом программа работать не станет;
- **конфликты** - та или иная программа может в системе конфликтовать с другой программой. Например, программы sendmail и postfix являются серверами электронной почты МТА-агентами (MTA, Mail Transfer Agent). Поскольку в системе может быть только один МТА-агент, установить можно или sendmail, или postfix, т.е. пакет sendmail конфликтует с пакетом postfix и наоборот.

Некоторая информация о содержащейся в пакете программе, как правило, содержится в самом имени пакета. Сделано это исключительно для удобства - взглянув на название пакета, можно узнать версию программы и еще кое-какую информацию о ней, например:  

```txt
program-1.5-14.i586.rpm
```  

Здесь **program** название программы, **1.5** ее версия, **14** выпуск пакета, **i586** архитектура процессора, на которую рассчитана программа. Если программа независима от архитектуры, то указывается параметр **noarch** - обычно так делают для документации, примеров конфигурационных файлов, т. e. для пакетов, содержащих информацию, которая не зависит от архитектуры  

#### Репозитории пакетов 

**Репозиторий** - это хранилище пакетов. **Репозиторий** может быть локальным, например каталогом на жестком диске или на любом другом носителе данных или же сетевым сервером в Интернете или в локальной сети, содержащем RPM- или  
DEВ-пакеты. **Для чего создаются репозитории?** Для централизованного управления  
обновлением пакетов. Представьте, что y нас нет репозиториев. Тогда, чтобы узнать, вышла ли новая версия нужной вам программы, вам пришлось бы посещать  
сайт ее разработчика или по крайней мере, сайт разработчика дистрибутива Linux  
a это не очень удобно. Один раз вы можете забыть проверить наличие обновлений,  
а потом вам вообще надоест это делать. Проще дождаться выхода новой версии  
дистрибутива и обновить все программы за один раз.


#### Программы для управления пакетами

Для управления пакетами в разных дистрибутивах используются разные программы. B табл. ниже приведены программы управления пакетами, которые можно встретить в современных дистрибутивах.

[[ab15a93c7d7d712d46827fba5a08dcf6_MD5.jpeg|Open: Pasted image 20250423140834.png]]
![[ab15a93c7d7d712d46827fba5a08dcf6_MD5.jpeg]]

pacman     arch-linux совместимые дистрибутивы.

Команды для dnf:

[[45d96552391f1b52c4e7e5fabd5074e9_MD5.jpeg|Open: Pasted image 20250423141052.png]]
![[45d96552391f1b52c4e7e5fabd5074e9_MD5.jpeg]]

### Программы dpkg и apt-get: установка пакетов в Deblan/Ubuntu.

#### Программа dpkg

Программа dpkg используется для установки, удаления и управления пакетами Debian/Ubuntu и вызывается из командной строки. Формат ее вызова следующий:

```sh
dpkg  [ключи] действие 
```

Для запуска dpkg нужно обладать полномочиями root, получить которые можно с помощью команды sudo. Рассмотрим, как правильно работать с программой dpkg. 

```sh
sudo dpkg -i /<путь>/расkаgе.dеb 
```

Как видите, в установке пакета нет ничего сложного. Процесс установки состоит из следующих шагов: 

1. Из пакета извлекаются управляющие файлы. 
2. Если уже была установлена старая версия этого пакета, тогда из старого пакета запускается сценарий prerm - он подготавливает систему к удалению старой версии пакета. Другими словами, если требуется, то обновление пакета выполняется автоматически. 
3. Выполняется сценарий **preinst**, если он есть в этом пакете. 
4. Из пакета распаковываются остальные файлы. Если был установлен старый па­ кет, то его файлы не удаляются, а сохраняются в другом месте, чтобы их можно было восстановить, если что-то пойдет не так. 
5. Если была установлена старая версия пакета, то из него выполняется сценарий postrm (действия после удаления). Сценарий запускается сразу после выполне­ния сценария **preinst** нового пакета, поскольку старые файлы удаляются во время записи новых файлов. 
6. Выполняется настройка пакета:
- распаковываются новые конфигурационные файлы, а старые сохраняются, 
если нужно будет их восстановить в случае ошибки во время установки нового пакета; 
- запускается сценарий postinst, если он есть в этом пакете. 

Удалить пакет тоже просто:

```sh
sudo dpkg -r <package>
```

При удалении пакета не требуется указывать путь к пакету и «расширение» пакета, 
т. е. символы .deb в конце имени файла.

Однако установка и удаление пакетов - это далеко не все, что можно выполнить 
с помощью программы **dpkg**. Другие действия программы **dpkg**, которые могут быть интересны каждому пользователю Ubuntu, представлены в таблице ниже.


| Ключ                          | Описание                                                                                                                                                                                                                                                                                                                                   |     |
| ----------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | --- |
| -l  [образе                   | Выводит все установленные пакеты, имена которых соответствуют образцу. Образец задается с помощью масок * и  ?  образец а* соответствует любому имени начинающемуся на букву «а». Если образец не задан, выводятся все пакеты.                                                                                                             |     |
| -L <имя паке                  | Выводит имена файлов из указанного пакета (пакет должен быть установлен)                                                                                                                                                                                                                                                                   |     |
| -р <имя пак                   | Выводит информацию об установленном пакете                                                                                                                                                                                                                                                                                                 |     |
| -s <имя па                    | Выводит информацию о статусе пакета                                                                                                                                                                                                                                                                     --unpack <имя пакета . deb>   deb> |     |
| --unpack <br><имя пакета.deb> | Распаковывает, но не устанавливает пакет (полезно, если устанавливать пакет не требуется, а нужно лишь достать из него один или несколько файлов)                                                                                                                                                                                          |     |

#### Программа apt

Программа **apt** используется не только в Debian/Ubuntu, но и в других дистрибути­вах, причем даже в Red Наt-совместимых (например, в ALТ Linux), но там с ее по­
мощью устанавливаются RРМ-пакеты. Вообще, выбор менеджера пакетов зависит 
от разработчиков дистрибутива. В одной версии дистрибутива может исполь­зоваться **apt-get**, в другой - **yum**, а в третьей - какой-то новый и перспективный 
менеджер пакетов. 

**КОМАНДА APT-GET** 
В старых дистрибутивах использовалась команда apt-get, в новых ее название упро­стили до просто **apt**, однако команда **apt-get** все еще используется из соображений об­ратной совместимости. 

Итак, предположим, что мы устанавливаем пакет package.deb. Но в процессе уста­новки обнаружилось, что он требует пакет lib.deb, который в системе не установлен. Что ж, вы находите в Интернете недостающий пакет lib.deb, устанавливаете его, а затем заново устанавливаете пакет package.deb. Не очень удобно, правда?

Намного проще выполнить команду:

```sh
sudo apt install package
```

Программа apt просматривает файл **/etc/apt/sources.list** - в этом файле перечислены источники (репозитории) DЕВ-пакетов, в качестве которых может выступать как внешний носитель, содержащий пакеты, так и сервер в Интернете. Программа на­ходит указанный пакет, читает служебную информацию о нем, затем разрешает зависимости (т. е. устанавливает все другие пакеты, необходимые для работы про­грамм устанавливаемого пакета), а затем устанавливает нужный нам пакет. 

Все загруженные программой **apt** пакеты записываются в каталог **/var/cache/apt/archives**  
Чтобы просмотреть содержимое файла **/etc/apt/sources.list**, можно выполнить следующую команду:

```sh
sudo nano /etc/apt/sources.list
```  

В репозиториях Ubuntu программы распределены особым образом. Так в репозиторий main включены основные программы, они распространяются свободно и  регулярно поддерживаются (обновляются). В репозитории **restricted** содержатся программы распространяемые по несвободным лицензиям, a также имеющие ограниченную поддержку. Репозиторий **universe** содержит программы с открытыми лицензиями поддержка программ из этого репозитория не гарантируется, но вполне возможна, все зависит от разработчика программы. В репозитории **multiverse** содержатся программы, распространяемые несвободно и безо всякой поддержки и гарантий. Репозиторий **security** содержит исправления пакетов из репозиториев **main** и **restricted**. Наконец, в репозитории **backports** содержатся неофициальные пакеты свежих версий программ собранные из исходных текстов энтузиастами Ubuntu (a не разработчиками программ).  

Чтобы настроить менеджер пакетов на российские репозитории (соответственно скорость загрузки пакетов будет выше), замените во всех строках файла **/etc/apt/sources.list** адрес **archive.ubuntu.соm** на **ru.archive.ubuntu.com**.  

Понятно, что программа apt-get может использоваться не только для установки  
пакетов. Общий формат вызова этой программы следующий:  
```sh
apt (опции) команды [пакет]  
```
Основные команды программы apt:

[[449ecc227cdb2c26c26b9e0ab0f1929e_MD5.jpeg|Open: Pasted image 20250423143612.png]]
![[449ecc227cdb2c26c26b9e0ab0f1929e_MD5.jpeg]]
[[54d4ab09672105374aab4782f64cb211_MD5.jpeg|Open: Pasted image 20250423143625.png]]
![[54d4ab09672105374aab4782f64cb211_MD5.jpeg]]


#### Установка RРМ-пакетов в Deblan/Ubuntu 
Всегда может случиться так, что нужная вам программа найдется только в виде RРМ-файла. Что ж, файл формата RPM можно преобразовать в формат DEB с помощью команды alien. Сразу хочу заметить, что установка таких - преобразованных - пакетов нежелательна, поскольку нет никакой гарантии, что установленная программа будет работать, но если другого выхода нет, можно попробовать: 

```sh
sudo alien package_file.rpm 
```

Если система сообщит вам, что команда alien не найдена, тогда нужно установить ее с помощью команды:

```sh
sudo apt install alien 
```




