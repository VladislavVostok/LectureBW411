### Тема: Подзапросы.

#### Запросы:


1. Вывести номера корпусов, если суммарный фонд финансирования расположенных в них кафедр превышает 100000. 
2. Вывести названия групп 5-го курса кафедры "Software Development”, которые имеют более 10 пар в первую неделю. 
3. Вывести названия групп, имеющих рейтинг (средний рейтинг всех студентов группы) больше, чем рейтинг группы “D221”. 
4. Вывести фамилии и имена преподавателей, ставка которых выше средней ставки профессоров. 
5. Вывести названия групп, у которых больше одного куратора. 
6. Вывести названия групп, имеющих рейтинг (средний рейтинг всех студентов группы) меньше, чем минимальный рейтинг групп 5-го курса. 
7. Вывести названия факультетов, суммарный фонд финансирования кафедр, которых больше суммарного фонда финансирования кафедр факультета “Computer Science”. 
8. Вывести названия дисциплин и полные имена преподавателей, читающих наибольшее количество лекций по ним. 
9. Вывести название дисциплины, по которому читается меньше всего лекций. 
10. Вывести количество студентов и читаемых дисциплин на кафедре "Softwate Development".

#### Структура базы данных

![[6.1.png]]


### Описание

База данных **Академия** (Academy) содержит информацию о сотрудниках, внутреннем устройстве академии и читаемых лекциях. 

Преподаватели, читающие лекции в академии представ- лены в виде таблицы **Преподаватели** (Teachers), в которой собрана основная информация, такая как: имя, фамилия и данные о зарплате. 

Также в базе данных присутствует информация о группах, хранимая в таблице **Группы** (Groups). Данные о факультетах и кафедрах содержатся в таблицах **Факультеты** (Faculties) и **Кафедры** (Departments) соответственно. 

Помимо этого, база данных хранит информацию, связанную с проводимыми лекциями. Расписание лекций содержится в таблице **Лекции** (Lectures), а описание дисциплин, по которым читаются лекции, в таблице **Дисциплины** (Subjects). 

Информация о студентах содержится в таблице **Студенты** (Students).

### Таблицы

Ниже представлено детальное описание структуры каждой таблицы.

1. **Кураторы** (Curators) 
	- **Идентификатор** (Id). Уникальный идентификатор кура- тора. 
		- Тип данных - int
		- Авто приращение.
		- Не может содержать null-значения. 
		- Первичный ключ. 
	- **Имя** (Name). Имя куратора. 
		- Тип данных - nvarchar(max)
		- Не может содержать null-значения. 
		- Не может быть пустым. 
	- **Фамилия** (Surname). Фамилия куратора. 
		- Тип данных - nvarchar(max)
		- Не может содержать null-значения. 
		- Не может быть пустым. 
		
2. **Кафедры** (Departments) 
	- **Идентификатор** (Id). Уникальный идентификатор кафедры. 
		- Тип данных - int
		- Авто приращение. 
		- Не может содержать null-значения. 
		- Первичный ключ. 
	- **Корпус** (Building). Номер корпуса, в котором располагается кафедра. 
		- Тип данных - int
		- Не может содержать null-значения. 
		- Должно быть в диапазоне от 1 до 5. 
	- **Финансирование** (Financing). Фонд финансирования кафедры. 
		- Тип данных - int
		- Не может содержать null-значения.
		- Не может быть меньше 0. 
		- Значение по умолчанию - 0.
	- **Название** (Name). Название кафедры. 
		- Тип данных - nvarchar(100)
		- Не может содержать null-значения. 
		- Не может быть пустым. 
		- Должно быть уникальным. 
	- **Идентификатор факультета** (FacultyId). Факультет, в состав которого входит кафедра. 
		- Тип данных - int
		- Не может содержать null-значения. 
		- Внешний ключ. 
		
3. **Факультеты** (Faculties) 
	- **Идентификатор** (Id). Уникальный идентификатор факультета. 
		- Тип данных - int
		- Авто приращение. 
		- Не может содержать null-значения. 
		- Первичный ключ. 
	- **Название** (Name). Название факультета. 
		- Тип данных - nvarchar(100)
		- Не может содержать null-значения. 
		- Не может быть пустым. 
		- Должно быть уникальным. 
	
4. **Группы** (Groups) 
	- **Идентификатор** (Id). Уникальный идентификатор группы.
		- Тип данных - int
		- Авто приращение. 
		- Не может содержать null-значения. 
		- Первичный ключ. 
	- **Название** (Name). Название группы. 
		- Тип данных - nvarchar(10)
		- Не может содержать null-значения. 
		- Не может быть пустым. 
		- Должно быть уникальным. 
	- **Курс** (Year). Курс (год) на котором обучается группа. 
		- Тип данных - int
		- Не может содержать null-значения. 
		- Должно быть в диапазоне от 1 до 5. 
	- **Идентификатор кафедры** (DepartmentId). Кафедра, в состав которой входит группа. 
		- Тип данных - int
		- Не может содержать null-значения. 
		- Внешний ключ. 5. Группы и кураторы (GroupsCurators) 
	
5. **Группы и кураторы** (GroupsCurators)
	- **Идентификатор** (Id). Уникальный идентификатор группы и куратора. 
		- Тип данных - int
		- Авто приращение. 
		- Не может содержать null-значения. 
		- Первичный ключ.
	- **Идентификатор куратора** (CuratorId). Куратор.
		- Тип данных - int
		- Не может содержать null-значения. 
		- Внешний ключ. 
	- **Идентификатор группы** (GroupId). Группа. 
		- Тип данных - int
		- Не может содержать null-значения. 
		- Внешний ключ. 
	
6. **Группы и лекции** (GroupsLectures) 
	- **Идентификатор** (Id). Уникальный идентификатор группы и лекции. 
		- Тип данных - int
		- Авто приращение. 
		- Не может содержать null-значения. 
		- Первичный ключ. 
	- **Идентификатор группы** (GroupId). Группа. 
		- Тип данных - int
		- Не может содержать null-значения. 
		- Внешний ключ. 
	- **Идентификатор лекции** (LectureId). Лекция. 
		- Тип данных - int
		- Не может содержать null-значения. 
		- Внешний ключ. 
		
7. **Группы и студенты** (GroupsStudents) 
	- **Идентификатор** (Id). Уникальный идентификатор группы и студенты.
		- Тип данных - int
		- Авто приращение. 
		- Не может содержать null-значения. 
		- Первичный ключ. 
	- **Идентификатор группы** (GroupId). Группа. 
		- Тип данных - int
		- Не может содержать null-значения. 
		- Внешний ключ. 
	- **Идентификатор студента** (StudentId). Студент.
		- Тип данных - int
		- Не может содержать null-значения. 
		- Внешний ключ. 
		
8. **Лекции** (Lectures) 
	- **Идентификатор** (Id). Уникальный идентификатор лекции. 
		- Тип данных - int
		- Авто приращение. 
		- Не может содержать null-значения. 
		- Первичный ключ. 
	- **Дата проведения** (Date). Дата проведения лекции. 
		- Тип данных - data
		- Не может содержать null-значения. 
		- Не может быть больше текущей даты. 
	- **Идентификатор дисциплины** (SubjectId). Дисциплина, по которой читается лекция. 
		- Тип данных - int
		- Не может содержать null-значения. 
		- Внешний ключ. 
	- **Идентификатор преподавателя** (TeacherId). Преподаватель, который читает лекцию. 
		- Тип данных - int
		- Не может содержать null-значения. 
		- Внешний ключ. 
	
9. **Студенты** (Students) 
	- **Идентификатор** (Id). Уникальный идентификатор студенты. 
		- Тип данных - int
		- Авто приращение. 
		- Не может содержать null-значения. 
		- Первичный ключ. 
	- **Имя** (Name). Имя студента. 
		- Тип данных - nvarchar(max)
		- Не может содержать null-значения. 
		- Не может быть пустым. 
	- **Рейтинг** (Rating). Рейтинг студента. 
		- Тип данных - int
		- Не может содержать null-значения. 
		- Должно быть в диапазоне от 0 до 5. 
	- **Фамилия** (Surname). Фамилия студента. 
		- Тип данных - nvarchar(max)
		- Не может содержать null-значения. 
		- Не может быть пустым.
	
10. **Дисциплины** (Subjects) 
	- Идентификатор (Id). Уникальный идентификатор дисциплины. 
		- Тип данных - int
		- Авто приращение. 
		- Не может содержать null-значения. 
		- Первичный ключ. 
	- **Название** (Name). Название дисциплины. 
		- Тип данных - nvarchar(100)
		- Не может содержать null-значения. 
		- Не может быть пустым. 
		- Должно быть уникальным. 
	
11. **Преподаватели** (Teachers) 
	- **Идентификатор** (Id). Уникальный идентификатор преподавателя. 
		- Тип данных - int
		- Авто приращение. 
		- Не может содержать null-значения. 
		- Первичный ключ. 
	- **Профессор** (IsProfessor). Является ли преподаватель профессором. 
		- Тип данных - bit
		- Не может содержать null-значения. 
		- Значение по умолчанию - 0.
	- **Имя** (Name). Имя преподавателя. 
		- Тип данных - nvarchar(max)
		- Не может содержать null-значения. 
		- Не может быть пустым. 
	- **Ставка** (Salary). Ставка преподавателя. 
		- Тип данных - money
		- Не может содержать null-значения. 
		- Не может быть меньше либо равно 0. 
	- **Фамилия** (Surname). Фамилия преподавателя.
		- Тип данных - nvarchar(max)
		- Не может содержать null-значения. 
		- Не может быть пустым.